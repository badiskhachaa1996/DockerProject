<h4 style="width: 100%;text-align: center;">Tableau Matching
</h4>
<p-table #dt3 [value]="matchingToSee" dataKey="_id" [rows]="8" [rowHover]="true" styleClass="p-datatable-gridlines"
    style="width: 100%;" [paginator]="true" rowExpandMode="single"
    [globalFilterFields]="['user_id.firstname','user_id.lastname','user_id.email', 'user_id.email_perso', 'user_id.type', 'user_id._id']"
    responsiveLayout="scroll">
    <ng-template pTemplate="header">
        <tr>
            <th style="width: 3rem" scope="col">Offre</th>
            <th style="width: 3rem" scope="col">Type Matching</th>
            <th style="width: 3rem" scope="col">Matcher</th>
            <th style="width: 3rem" scope="col">Statut Matching</th>
            <th style="width: 3rem" scope="col">Taux Matching</th>
            <th style="width: 3rem" scope="col">Entretien</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-match>
        <tr>
            <td>
                {{match.offre_id.custom_id}}
            </td>
            <td>
                {{match.type_matching}}
            </td>
            <td>
                {{match.matcher_id.firstname | titlecase}} {{match.matcher_id.lastname | uppercase}}
            </td>
            <td>
                {{match.statut}}
            </td>
            <td>
                {{match.taux}}
            </td>
            <td *ngIf="rdvDic[match.offre_id._id]">
                <i class="pi true-icon pi-check-circle" tooltipPosition="bottom" style="color: green;cursor: pointer;"
                    pTooltip="Voir l'entretien" (click)="seeRDV(rdvDic[match.offre_id._id])"></i>
            </td>
            <td *ngIf="!rdvDic[match.offre_id._id]">
                <i class="pi false-icon pi-times-circle" tooltipPosition="bottom" style="color: red;"
                    pTooltip="Pas d'entretien"></i>
            </td>
        </tr>
    </ng-template>
</p-table>


<p-dialog header="Informations du Rendez-Vous" [(visible)]="displayRDV" modal="modal" showEffect="fade"
    [style]="{width: '50vw'}" [breakpoints]="{'960px': '75vw'}">
    <p-table dataKey="_id" [value]="[dataRDV]" class="col-12" responsiveLayout="scroll"
        styleClass="p-datatable-gridlines">
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="winner_id.firstname" scope="col" style="text-align: center;">
                    Winner <p-sortIcon field="winner_id.firstname"></p-sortIcon>
                </th>
                <th pSortableColumn="user_id.firstname" scope="col" style="text-align: center;">
                    Etudiant <p-sortIcon field="user_id.firstname"></p-sortIcon>
                </th>
                <th pSortableColumn="company_email" scope="col" style="text-align: center;">
                    Email de la companie <p-sortIcon field="company_email"></p-sortIcon>
                </th>
                <th pSortableColumn="meeting_start_date" scope="col" style="text-align: center;">
                    Date <p-sortIcon field="meeting_start_date"></p-sortIcon>
                </th>
                <th pSortableColumn="date_creation" scope="col" style="text-align: center;">
                    Date d'ajout <p-sortIcon field="date_creation"></p-sortIcon>
                </th>
                <th pSortableColumn="description" scope="col" style="text-align: center;">
                    Description <p-sortIcon field="description"></p-sortIcon>
                </th>
                <th pSortableColumn="statut" scope="col" style="text-align: center;">
                    Statut <p-sortIcon field="statut"></p-sortIcon>
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rdv>
            <tr>
                <td>
                    {{rdv?.winner_id?.firstname|titlecase }} {{rdv?.winner_id?.lastname |uppercase }}
                </td>
                <td>
                    {{rdv?.user_id?.firstname|titlecase }} {{rdv?.user_id?.lastname |uppercase }}
                </td>
                <td>
                    {{rdv?.company_email}}
                </td>
                <td>
                    {{rdv?.meeting_start_date | date:'dd MMMM yy'}} {{rdv?.meeting_start_date | date:'shortTime'}}
                </td>
                <td>
                    {{rdv?.date_creation | date:'dd MMMM yy'}}
                </td>
                <td>
                    {{rdv?.description}}
                </td>
                <td>
                    {{rdv?.statut}}
                </td>
            </tr>

        </ng-template>
    </p-table>
</p-dialog>