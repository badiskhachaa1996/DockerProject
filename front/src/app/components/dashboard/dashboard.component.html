<p-toast></p-toast>
<div class="col-12">
    <input type="file" (change)="FileUploadPC($event.target.files)" id="selectedFile" #selectedFile
        accept=".pdf,.jpg,.png,.jpeg" style="display: none;" pInputFile />
</div>
<div *ngIf="isUnknow">
    <h2 *ngIf="user" style="text-align: center;">Bienvenue {{user.firstname | titlecase}} {{user.lastname | uppercase}}
    </h2>
    <div class="card">
        <div class="col-8 col-offset-2 flex justify-content-center flex-wrap card-container">
            <img src="assets\images\construction.jpg" style="width: 40%;">
        </div>
        <p>Le tableau de bord est actuellement en construction pour votre statut!</p>
        <p>Pour naviguer sur l'application, merci d'utiliser le menu à gauche.</p>
        <p>Si vous rencontrez le moindre problème, nous vous invitons à créer un ticket dans la partie <span
                style="color: red; font-weight: bold;">"Ticketing"</span> dans le menu</p>
        <p>Merci de votre patience!</p>
    </div>
</div>

<!-- Modèle visiteur -->
<div *ngIf="isVisitor">
    <h2 *ngIf="user && !isEtudiant" style="text-align: center;">Bienvenue {{user.firstname | titlecase}} {{user.lastname
        | uppercase}}
    </h2>
    <h5 style="color: red;"> Ce compte étant un compte avec un accès limité, vous n'aurez ni droit à la modification ni
        à l'ajout de données</h5>
    <div class="card">
        <p>Bonjour, ceci est un accès limité à notre outils de gestion [IMS]. N'hésitez pas à faire le tour du menu qui
            vous a été attribué.</p>
        <p>Bonne visite sur IMS!</p>
    </div>
</div>


<div *ngIf="isAdmin">
    <h1 *ngIf="user && !isEtudiant" style="text-align: center;">Bienvenue {{user.firstname | titlecase}} {{user.lastname
        | uppercase}}
    </h1>
    <h5 style="text-align: center; margin-top: -10px;">{{ today | date: 'dd MMM y' }}</h5>
    <p *ngIf="dailyCheck?.number_of_hour > 0 && !isCheckOut" style="text-align: center">
        Vous avez passé <span style="font-weight: bolder;">{{dailyCheck.number_of_hour}}h</span> sur vos tâches de la
        journée, pour valider votre journée vous devez effectuer un total de <span
            *ngIf="user.pays_adresse == 'Tunisie'">8h</span> <span *ngIf="user.pays_adresse != 'Tunisie'">7h</span>
        minimum
    </p>

    <div class="col-12">
        <div class="card">
            <h6 *ngIf="dailyCheck && !isCheckOut">Vous êtes arrivé au travail à {{ dailyCheck.in_date | date: 'H:mm' }}
            </h6>
            <h5>
                Statut: <span style="color: black; font-weight: bolder">{{ statut }}</span>
                <span *ngIf="dailyCheck && !isCheckOut" style="color: gray;">
                    |
                    Si vous ne validez pas votre CRA vos heures ne seront pas prises en compte
                </span>
                <span *ngIf="isCheckOut" style="color: rgb(27, 214, 27);">
                    |
                    Merci d'avoir validé votre journée
                </span>
            </h5>

            <button [disabled]="isCheck" pButton class="p-button-info mr-2 mb-2" label="Check in" icon="pi pi-sign-in"
                (click)="onCheckIn()"></button>

            <button [disabled]="!isCheck || isCheckOut" pButton class="p-button-success mr-2 mb-2"
                label="Valider mon CRA" icon="pi pi-sign-in"
                (click)="showButtonsValidateCra = !showButtonsValidateCra; showTaskForUser = false; showFormDailyActivityDetails = false;"></button>

            <button [disabled]="!dailyCheck?.craIsValidate || isCheckOut || dailyCheck.number_of_hour < 7" pButton
                class="p-button-danger mr-2 mb-2" label="Check out" icon="pi pi-sign-out"
                (click)="onCheckOut();"></button>

            <!-- Bouton affiché au clique sur le bouton valider mon cra -->
            <div *ngIf="showButtonsValidateCra">
                <button style="margin: 2px;" pButton class="p-button-primary" icon="pi pi-list"
                    label="Mes Autres Activités"
                    (click)="onToggleFormDailyActivityDetail(); showTaskForUser = false;"></button>
                <button style="margin: 2px;" pButton class="p-button-primary" icon="pi pi-file"
                    label="Mes Activités Projets"
                    (click)="onGetTaskInProgressForUser(); onToggleShowTaskForUser(); showFormDailyActivityDetails = false;"></button>
            </div>

            <!-- Formulaire pour remplir les tâches du jour -->
            <form *ngIf="showFormDailyActivityDetails" class="p-fluid mt-2" [formGroup]="formDailyActivityDetails"
                (ngSubmit)="onValidateCraByForm()">
                <div class="p-formgrid grid">
                    <div class="field col-12">
                        <textarea pInputText type="text" rows="6" placeholder="Description de l'activité"
                            formControlName="task"></textarea>
                    </div>
                    <div class="field col-12">
                        <input pInputText type="number" placeholder="Nombre d'heure passée sur l'activité"
                            formControlName="number_of_hour">
                    </div>
                </div>

                <div class="field col-4 md:col-4">
                    <button pButton type="submit" [disabled]="formDailyActivityDetails.invalid"
                        label="Valider"></button>
                </div>
            </form>

            <!-- Table d'affichage de la liste des tâches en cours de l'utilisateur -->
            <div *ngIf="showTaskForUser" style="margin-top: 5px;">
                <h5>Vos activités projets en cours</h5>
                <small>Merci de mettre à jour les activités</small>
                <p-table #dt1 [value]="taskForUser" dataKey="_id" editMode="row" [rows]="5" [rowHover]="true"
                    [paginator]="true" [globalFilterFields]="['libelle','percent','project_id?.libelle']"
                    responsiveLayout="scroll">

                    <ng-template pTemplate="caption">
                        <div class="flex justify-content-between flex-column sm:flex-row">
                            <span class="p-input-icon-left mb-2">
                                <i class="pi pi-search"></i>
                                <input pInputText type="text" #filter
                                    (input)="dt1.filterGlobal($event.target.value, 'contains')" placeholder="Recherche"
                                    class="w-full" />
                            </span>
                        </div>
                    </ng-template>

                    <ng-template pTemplate="header">
                        <tr>
                            <th>Libelle</th>
                            <th>Avancement</th>
                            <th>Projet</th>
                            <th>heure(s) restante(s)</th>
                            <th>DeadLine</th>
                            <th></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-task let-editing="editing" let-ri="rowIndex">
                        <tr [pEditableRow]="task">
                            <td>
                                {{ task.libelle }}
                            </td>
                            <td>
                                <p-cellEditor>
                                    <ng-template pTemplate="input">
                                        <input pInputText type="text" [(ngModel)]="task.percent">
                                    </ng-template>
                                    <ng-template pTemplate="output">
                                        {{task.percent}}%
                                    </ng-template>
                                </p-cellEditor>
                            </td>
                            <td>
                                {{ task.project_id?.libelle }}
                            </td>
                            <td>
                                <p-cellEditor>
                                    <ng-template pTemplate="input">
                                        <input pInputText type="number" [(ngModel)]="task.number_of_hour">
                                    </ng-template>
                                    <ng-template pTemplate="output">
                                        {{task.number_of_hour}} h
                                    </ng-template>
                                </p-cellEditor>
                            </td>
                            <td>
                                {{ task.date_limite | date: 'dd/MM/YYYY' }}
                            </td>
                            <td>
                                <div class="flex align-items-center justify-content-center gap-2">
                                    <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow
                                        icon="pi pi-pencil" (click)="onRowEditInit(task)"
                                        class="p-button-rounded p-button-text"></button>
                                    <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow
                                        icon="pi pi-check" (click)="onRowEditSave(task)"
                                        class="p-button-rounded p-button-text p-button-success mr-2"></button>
                                    <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow
                                        icon="pi pi-times" (click)="onRowEditCancel(task, ri)"
                                        class="p-button-rounded p-button-text p-button-danger"></button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>
</div>




<div class="grid" *ngIf="isEtudiant && dataEtudiant && !isVisitor">
    <h1 *ngIf="user && dataEtudiant">Bienvenue {{user.firstname | titlecase}} {{user.lastname | uppercase}}
        N°{{dataEtudiant?.custom_id}}
    </h1>
    <p *ngIf="dataEtudiant && dataEtudiant?.statut_dossier?.includes('Document Manquant') || dataEtudiant?.statut_dossier?.includes('Paiement non finalisé')"
        style="color:red;">Votre
        dossier n'est pas complet, il manque des documents ou votre statut n'est pas régularisé, veuillez contacter
        l'administration via Ticketing
    </p>


    <div class="col-12 card"
        *ngIf="dataEtudiant.lien_livret.read || dataEtudiant.lien_dossier_professionel ||dataEtudiant.lien_tableau_synthese || dataEtudiant.lien_bulletin['Semestre 1'] || dataEtudiant.lien_bulletin['Semestre 2'] || dataEtudiant.lien_bulletin['Annuel'] || dataEtudiant.lien_attestation || (dataEtudiant.classe_id && (dataEtudiant.classe_id.lien_programme || dataEtudiant.classe_id.lien_calendrier))">
        <!-- *ngIf="!dataEtudiant?.statut_dossier?.includes('Paiement non finalisé')" -->
        <div class="grid"
            *ngIf="dataEtudiant.lien_livret.read || dataEtudiant.lien_dossier_professionel ||dataEtudiant.lien_tableau_synthese">
            <h4 class="col-12">Documents</h4>
            <div class="card col-6" *ngIf="dataEtudiant.lien_livret.read">
                <h5>Livret</h5>
                <a href="{{dataEtudiant.lien_livret.read}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
            <div class="card col-3" *ngIf="dataEtudiant.lien_dossier_professionel">
                <h5 class="col-12">Dossier professionel</h5>
                <a href="{{dataEtudiant.lien_dossier_professionel}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
            <div class="card col-3" *ngIf="dataEtudiant.lien_tableau_synthese">
                <h5>Tableau synthèse</h5>
                <a href="{{dataEtudiant.lien_tableau_synthese}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
        </div>
        <div class="grid"
            *ngIf="dataEtudiant.lien_bulletin['Semestre 1'] || dataEtudiant.lien_bulletin['Semestre 2'] || dataEtudiant.lien_bulletin['Annuel']">
            <h4 class="col-12">Bulletin</h4>
            <div class="card col-3" *ngIf="dataEtudiant.lien_bulletin['Semestre 1'] && paimentS1">
                <h5>Semestre 1</h5>
                <a href="{{dataEtudiant.lien_bulletin['Semestre 1']}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
            <div class="card col-6" *ngIf="!paimentS1 && dataEtudiant.lien_bulletin['Semestre 1']">
                <h5>Semestre 1</h5>
                <p>Vous n'avez pas régularisé votre 1er semestre, merci de contacter l'administration ou de vous rendre
                    au
                    campus du Louvre.</p>
            </div>
            <div class="card col-3" *ngIf="dataEtudiant.lien_bulletin['Semestre 2'] && paimentAn">
                <h5>Semestre 2</h5>
                <a href="{{dataEtudiant.lien_bulletin['Semestre 2']}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
            <div class="card col-6" *ngIf="!paimentAn && dataEtudiant.lien_bulletin['Semestre 2']">
                <h5>Semestre 2</h5>
                <p>Vous n'avez pas régularisé votre 2ème semestre, merci de contacter l'administration ou de vous rendre
                    au
                    campus du Louvre.</p>
            </div>
            <div class="card col-6" *ngIf="dataEtudiant.lien_bulletin['Annuel'] && paimentAn">
                <h5>Annuel</h5>
                <a href="{{dataEtudiant.lien_bulletin['Annuel']}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
            <div class="card col-6" *ngIf="!paimentAn && dataEtudiant.lien_bulletin['Annuel']">
                <h5>Annuel</h5>
                <p>Vous n'avez pas régularisé votre année, merci de contacter l'administration ou de vous rendre au
                    campus du Louvre.</p>
            </div>
        </div>
        <div class="grid" *ngIf="dataEtudiant.lien_attestation">
            <div class="card col-12" *ngIf="dataEtudiant.lien_attestation">
                <h5>Attestation</h5>
                <a href="{{dataEtudiant.lien_attestation}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
        </div>
        <div class="grid"
            *ngIf="dataEtudiant.classe_id && (dataEtudiant.classe_id.lien_programme || dataEtudiant.classe_id.lien_calendrier)">
            <h4 class="col-12">Documents de Formation</h4>
            <div class="card col-6" *ngIf="dataEtudiant.classe_id.lien_programme">
                <h5>Programme</h5>
                <a href="{{dataEtudiant.classe_id.lien_programme}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
            <div class="card col-6" *ngIf="dataEtudiant.classe_id.lien_calendrier">
                <h5>Calendrier</h5>
                <a href="{{dataEtudiant.classe_id.lien_calendrier}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
        </div>
    </div>

    <div class="col-12 md:col-6">
        <div class="card">
            <div class="col-12 flex justify-content-center flex-wrap card-container">
                <div>
                    <h4 class="col-12">Planning journée</h4>
                </div>

                <div class="col-12" *ngIf="type==null">
                    <p-fullCalendar #calendar [events]="events" class="col-12 md:col-8" [options]="optionsetu">
                    </p-fullCalendar>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 md:col-6">
        <div class="card" *ngIf="dernotes">
            <h5>Dernières notes obtenues</h5>
            <p-table [value]="dernotes">
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="matiere_id.nom">Matière <p-sortIcon field="matiere_id.nom"></p-sortIcon>
                        </th>
                        <th pSortableColumn="note">Note <p-sortIcon field="note_val"></p-sortIcon>
                        </th>

                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-note>
                    <tr>
                        <td style="width: 35%; min-width: 7rem;">{{note.matiere_id.nom }}</td>
                        <td style="width: 35%; min-width: 7rem;">{{ note.note_val }}</td>

                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>

    <div class="col-12">
        <div class="card">
            <h5>
                Besoin d'un logement ?
                Rendez-vous sur <a routerLink="/logements">IMS Booking</a>. Nous vous mettons à disposition des
                logements tout neufs et pas cher.
            </h5>

            <p-galleria [(value)]="carousselImages" [responsiveOptions]="responsiveOptions"
                [containerStyle]="{'max-width': '800px', 'margin':'auto'}" [numVisible]="5">
                <ng-template pTemplate="item" let-item>
                    <img [src]="item.previewImageSrc" style="width: 100%;" />
                </ng-template>
                <ng-template pTemplate="thumbnail" let-item>
                    <div class="grid grid-nogutter justify-content-center">
                        <img [src]="item.thumbnailImageSrc" style="width:100px; height:100px" />
                    </div>
                </ng-template>
            </p-galleria>
        </div>
    </div>

</div>

<div *ngIf="isFormateur">
    <h2 *ngIf="!isEtudiant" style="text-align: center;">Bienvenue {{user?.lastname | uppercase}} {{user?.firstname |
        titlecase}} </h2>

    <!-- Affiche la partie checking -->
    <div class="col-12">
        <div class="card">
            <button *ngIf="!isCheck" pButton class="p-button-info mr-2 mb-2" label="Check in" icon="pi pi-sign-in"
                style="float: right" (click)="onCheckIn()"></button>
            <button *ngIf="isCheck" [disabled]="!dailyCheck.isCheckable" pButton class="p-button-danger mr-2 mb-2"
                label="Check out" icon="pi pi-sign-out" style="float: right"
                (click)="showFormDailyActivityDetails = true"></button>
            <h5>
                Statut: <span style="border-radius: 30px; padding: 3px; color: white;">{{ statut }}</span>
            </h5>
            <small *ngIf="dailyCheck">Vous êtes arrivé au travail le <span style="color: red">{{ dailyCheck.in_date |
                    date: 'd/M/yy à h:mm a' }}</span></small>

            <form *ngIf="showFormDailyActivityDetails" class="p-fluid" [formGroup]="formDailyActivityDetails"
                (ngSubmit)="onCheckOut()">
                <h2>Tâches du jour</h2>
                <div class="p-formgrid grid">
                    <div class="field col-12">
                        <input pInputText type="text" placeholder="tâche 1: Description" formControlName="task" />
                    </div>
                </div>
                <hr>
                <div formArrayName="tasks">
                    <h3>Tâches supplémentaires</h3>
                    <div class="p-formgrid grid" *ngFor="let taskControl of getTasks().controls; let i = index">
                        <div class="field col-10">
                            <input pInputText type="text" placeholder="Tache {{ i + 2 }}" [formControlName]="i">
                        </div>
                        <div class="field col-2">
                            <button pButton icon="pi pi-trash" type="button" (click)="onRemoveTask(i)"
                                class="p-button-outlined p-button-danger"></button>
                        </div>
                    </div>
                    <button pButton icon="pi pi-plus" type="button" (click)="onAddTask()"
                        class="p-button-outlined p-button-info"></button>
                </div>

                <div class="field col-4 md:col-2">
                    <button pButton type="submit" [disabled]="formDailyActivityDetails.invalid"
                        label="Valider & Check Out"></button>
                </div>

            </form>
        </div>
        <div class="col-12 card" *ngIf="dataFormateur">
            <div class="grid" *ngIf="dataFormateur.lien_sequentiel">
                <h4>Documents</h4>
                <div class="card col-12" *ngIf="dataFormateur.lien_sequentiel">
                    <h5>Sequentiels</h5>
                    <a href="{{dataFormateur.lien_sequentiel}}" target="_blank"><img style="max-height: 20vh;"
                            src="assets/images/word.png" /></a>
                </div>
            </div>
        </div>
    </div>

    <!-- Afficher les cours de la journée-->
    <div class="col-12 md:col-12">
        <div class="card">
            <div class="col-12 flex justify-content-center flex-wrap card-container">
                <div>
                    <h4 class="col-12">Planning pour la journée d'aujourd'hui</h4>
                </div>

                <div class="col-12" *ngIf="type==null">
                    <p-fullCalendar #calendar [events]="events" class="col-12 md:col-8" [options]="optionsforma">
                    </p-fullCalendar>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="isAdmission">
    <div class="grid">
        <div class="col-6 lg:col-6 xl:col-4">
            <div class="card mb-0">
                <div class="flex justify-content-between mb-4">
                    <div>
                        <span class="block text-500 font-medium mb-4">Nombre total d'inscrits</span>
                        <div class="text-900 font-medium text-xl">{{numberTotalInscription}}</div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-green-100 border-round"
                        [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="pi pi-check-circle text-green-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-6 lg:col-6 xl:col-4">
            <div class="card mb-0">
                <div class="flex justify-content-between mb-4">
                    <div>
                        <span class="block text-500 font-medium mb-4">Nombre de nouvelle inscrits </span>
                        <div class="text-900 font-medium text-xl">{{numberNewStudentInscription}}</div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-cyan-100 border-round"
                        [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="pi pi-id-card text-cyan-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 lg:col-6 xl:col-4">
            <div class="card mb-0">
                <div class="flex justify-content-between mb-4">
                    <div>
                        <span class="block text-500 font-medium mb-4">Nombre d'etudiant en attente</span>
                        <div class="text-900 font-medium text-xl">{{numberStudentWaiting}}</div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-orange-100 border-round"
                        [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="pi pi-clock text-orange-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12">
            <div class="card">
                <button *ngIf="!isCheck" pButton class="p-button-info mr-2 mb-2" label="Check in" icon="pi pi-sign-in"
                    style="float: right" (click)="onCheckIn()"></button>
                <button *ngIf="isCheck" [disabled]="!dailyCheck.isCheckable" pButton class="p-button-danger mr-2 mb-2"
                    label="Check out" icon="pi pi-sign-out" style="float: right"
                    (click)="showFormDailyActivityDetails = true"></button>
                <h5>
                    Statut: <span style="border-radius: 30px; padding: 3px; color: white;">{{ statut }}</span>
                </h5>
                <small *ngIf="dailyCheck">Vous êtes arrivé au travail le <span style="color: red">{{ dailyCheck.in_date
                        | date: 'd/M/yy à h:mm a' }}</span></small>

                <form *ngIf="showFormDailyActivityDetails" class="p-fluid" [formGroup]="formDailyActivityDetails"
                    (ngSubmit)="onCheckOut()">
                    <h2>Tâches du jour</h2>
                    <div class="p-formgrid grid">
                        <div class="field col-12">
                            <input pInputText type="text" placeholder="tâche 1: Description" formControlName="task" />
                        </div>
                    </div>
                    <hr>
                    <div formArrayName="tasks">
                        <h3>Tâches supplémentaires</h3>
                        <div class="p-formgrid grid" *ngFor="let taskControl of getTasks().controls; let i = index">
                            <div class="field col-10">
                                <input pInputText type="text" placeholder="Tache {{ i + 2 }}" [formControlName]="i">
                            </div>
                            <div class="field col-2">
                                <button pButton icon="pi pi-trash" type="button" (click)="onRemoveTask(i)"
                                    class="p-button-outlined p-button-danger"></button>
                            </div>
                        </div>
                        <button pButton icon="pi pi-plus" type="button" (click)="onAddTask()"
                            class="p-button-outlined p-button-info"></button>
                    </div>

                    <div class="field col-4 md:col-2">
                        <button pButton type="submit" [disabled]="formDailyActivityDetails.invalid"
                            label="Valider & Check Out"></button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>

<div *ngIf="isPedagogie">

    <div class="col-12">
        <div class="card">
            <button *ngIf="!isCheck" pButton class="p-button-info mr-2 mb-2" label="Check in" icon="pi pi-sign-in"
                style="float: right" (click)="onCheckIn()"></button>
            <button *ngIf="isCheck" [disabled]="!dailyCheck.isCheckable" pButton class="p-button-danger mr-2 mb-2"
                label="Check out" icon="pi pi-sign-out" style="float: right"
                (click)="showFormDailyActivityDetails = true"></button>
            <h5>
                Statut: <span style="border-radius: 30px; padding: 3px; color: white;">{{ statut }}</span>
            </h5>
            <small *ngIf="dailyCheck">Vous êtes arrivé au travail le <span style="color: red">{{ dailyCheck.in_date |
                    date: 'd/M/yy à h:mm a' }}</span></small>

            <form *ngIf="showFormDailyActivityDetails" class="p-fluid" [formGroup]="formDailyActivityDetails"
                (ngSubmit)="onCheckOut()">
                <h2>Tâches du jour</h2>
                <div class="p-formgrid grid">
                    <div class="field col-12">
                        <input pInputText type="text" placeholder="tâche 1: Description" formControlName="task" />
                    </div>
                </div>
                <hr>
                <div formArrayName="tasks">
                    <h3>Tâches supplémentaires</h3>
                    <div class="p-formgrid grid" *ngFor="let taskControl of getTasks().controls; let i = index">
                        <div class="field col-10">
                            <input pInputText type="text" placeholder="Tache {{ i + 2 }}" [formControlName]="i">
                        </div>
                        <div class="field col-2">
                            <button pButton icon="pi pi-trash" type="button" (click)="onRemoveTask(i)"
                                class="p-button-outlined p-button-danger"></button>
                        </div>
                    </div>
                    <button pButton icon="pi pi-plus" type="button" (click)="onAddTask()"
                        class="p-button-outlined p-button-info"></button>
                </div>

                <div class="field col-4 md:col-2">
                    <button pButton type="submit" [disabled]="formDailyActivityDetails.invalid"
                        label="Valider & Check Out"></button>
                </div>

            </form>
        </div>
    </div>

    <div class="card">
        <div class="col-8 col-offset-2 flex justify-content-center flex-wrap card-container">
            <img src="assets\images\construction.jpg" style="width: 40%;">
        </div>
        <p>Le tableau de bord de la pédagogie est actuellement en construction pour votre statut!</p>
        <p>Pour naviguer sur l'application, merci d'utiliser le menu à gauche.</p>
        <p>Si vous rencontrez le moindre problème, nous vous invitons à créer un ticket dans la partie <span
                style="color: red; font-weight: bold;">"Ticketing"</span> dans le menu</p>
        <p>Merci de votre patience!</p>
    </div>
    <!-- Afficher un calendrier de taches (TODO)-->
    <!-- Afficher le nombre total de réinscription en attente -->
    <!-- Afficher le nombre total d'étudiants dans les filières Informatique, Commercial et Tertiaire -->
    <!-- Afficher l'emploi du temps de la journée dans les filières Informatique, Commercial et Tertiaire -->
</div>

<div *ngIf="isCommercial && !CommercialExterne">

    <div class="col-12">
        <div class="card">
            <button *ngIf="!isCheck" pButton class="p-button-info mr-2 mb-2" label="Check in" icon="pi pi-sign-in"
                style="float: right" (click)="onCheckIn()"></button>
            <button *ngIf="isCheck" [disabled]="!dailyCheck.isCheckable" pButton class="p-button-danger mr-2 mb-2"
                label="Check out" icon="pi pi-sign-out" style="float: right"
                (click)="showFormDailyActivityDetails = true"></button>
            <h5>
                Statut: <span style="border-radius: 30px; padding: 3px; color: white;">{{ statut }}</span>
            </h5>
            <small *ngIf="dailyCheck">Vous êtes arrivé au travail le <span style="color: red">{{ dailyCheck.in_date |
                    date: 'd/M/yy à h:mm a' }}</span></small>

            <form *ngIf="showFormDailyActivityDetails" class="p-fluid" [formGroup]="formDailyActivityDetails"
                (ngSubmit)="onCheckOut()">
                <h2>Tâches du jour</h2>
                <div class="p-formgrid grid">
                    <div class="field col-12">
                        <input pInputText type="text" placeholder="tâche 1: Description" formControlName="task" />
                    </div>
                </div>
                <hr>
                <div formArrayName="tasks">
                    <h3>Tâches supplémentaires</h3>
                    <div class="p-formgrid grid" *ngFor="let taskControl of getTasks().controls; let i = index">
                        <div class="field col-10">
                            <input pInputText type="text" placeholder="Tache {{ i + 2 }}" [formControlName]="i">
                        </div>
                        <div class="field col-2">
                            <button pButton icon="pi pi-trash" type="button" (click)="onRemoveTask(i)"
                                class="p-button-outlined p-button-danger"></button>
                        </div>
                    </div>
                    <button pButton icon="pi pi-plus" type="button" (click)="onAddTask()"
                        class="p-button-outlined p-button-info"></button>
                </div>

                <div class="field col-4 md:col-2">
                    <button pButton type="submit" [disabled]="formDailyActivityDetails.invalid"
                        label="Valider & Check Out"></button>
                </div>

            </form>
        </div>
    </div>

    <div class="card">
        <div class="col-8 col-offset-2 flex justify-content-center flex-wrap card-container">
            <img src="assets\images\construction.jpg" style="width: 40%;">
        </div>
        <p>Le tableau de bord des commerciaux est actuellement en construction pour votre statut!</p>
        <p>Pour naviguer sur l'application, merci d'utiliser le menu à gauche.</p>
        <p>Si vous rencontrez le moindre problème, nous vous invitons à créer un ticket dans la partie <span
                style="color: red; font-weight: bold;">"Ticketing"</span> dans le menu</p>
        <p>Merci de votre patience!</p>
    </div>
    <!-- Afficher le nombre total de ces prospects avec leur code -->
    <!-- Afficher le nombre total d'étudiants avec leur code -->
</div>

<div *ngIf="isCommercial && CommercialExterne">

    <div class="col-12">
        <h1 class="text-center" *ngIf="PartenaireInfo">Bonjour notre cher partenaire {{PartenaireInfo.nom}}</h1>
        <div class="card">
            <p-fieldset legend="Information Entreprise">
                <div class="grid" style="color: black;font-weight:normal" *ngIf="!editInfoCommercial">
                    <div class="col-12 md:col-3">
                        <a (click)="clickFile()" pTooltip="Modifier la photo de profil" tooltipPosition="bottom"
                            style="cursor: pointer;"><img [src]="imageToShow" alt="Profil" width="150" height="150"
                                style="border-radius: 50px;" /></a>
                    </div>
                    <div class="col-12 md:col-6 grid">
                        <p class="col-12 md:col-6 text-center"><strong>Téléphone:</strong><br>
                            {{PartenaireInfo?.indicatifPhone}} {{PartenaireInfo?.phone}}</p>
                        <p class="col-12 md:col-6 text-center"><strong>WhatsApp:</strong><br>
                            {{PartenaireInfo?.indicatifWhatsapp}} {{PartenaireInfo?.WhatsApp}}
                        </p>
                        <p class="col-12 md:col-6 text-center"><strong>Site Web:</strong><br>
                            {{PartenaireInfo?.site_web}}</p>
                        <p class="col-12 md:col-6 text-center"><strong>Facebook:</strong><br>
                            {{PartenaireInfo?.facebook}}
                        </p>
                        <p class="col-12 md:col-12 text-center"><strong>Pays:</strong><br>
                            {{PartenaireInfo?.Pays}}</p>
                        <p class="col-12 md:col-12 text-center"><strong>Services:</strong><br>
                            {{PartenaireInfo?.Services}}
                        </p>

                        <p class="col-12 md:col-12 text-center"><strong>Description:</strong><br>
                            {{PartenaireInfo?.description}}
                        </p>
                    </div>
                    <div class="col-12 md:col-3">
                        <p style="cursor: pointer;"><a (click)="initEditCommercialForm()">Modifier les informations</a>
                        </p>
                    </div>
                </div>
                <div class="grid" style="color: black;font-weight:normal" *ngIf="editInfoCommercial">
                    <form class="col-12 grid" [formGroup]="editInfoCommercialForm">
                        <div class="col-12 md:col-3">
                            <a (click)="clickFile()" pTooltip="Modifier la photo de profil" tooltipPosition="bottom"
                                style="cursor: pointer;"><img [src]="imageToShow" alt="Profil" width="150" height="150"
                                    style="border-radius: 50px;" /></a>
                        </div>
                        <div class="col-12 md:col-6 grid">
                            <p class="col-12 md:col-6 text-center"><strong>Téléphone:</strong><br>
                                <input type="text" pInputText placeholder="+33" formControlName="indicatifPhone" /><br>
                                <input type="text" pInputText placeholder="0612345678" formControlName="phone" />
                            </p>
                            <p class="col-12 md:col-6 text-center"><strong>WhatsApp:</strong><br>
                                <input type="text" pInputText placeholder="+33"
                                    formControlName="indicatifWhatsapp" /><br>
                                <input type="text" pInputText placeholder="0612345678" formControlName="WhatsApp" />
                            </p>
                            <p class="col-12 md:col-6 text-center"><strong>Site Web:</strong><br>
                                <input type="text" pInputText placeholder="https://www.example.com"
                                    formControlName="site_web" />
                            </p>
                            <p class="col-12 md:col-6 text-center"><strong>Facebook:</strong><br>
                                <input type="text" pInputText placeholder="https://www.example.com"
                                    formControlName="facebook" />
                            </p>
                            <p class="col-12 md:col-12 text-center"><strong>Pays:</strong><br>
                                <p-multiSelect formControlName="Pays" [options]="paysList" placeholder="Pays"
                                    optionLabel="value" optionValue="value" emptyFilterMessage="Pas de pays trouvé"
                                    filterPlaceholder="Pays" filter="true" optionDisabled="actif"></p-multiSelect>
                            </p>
                            <p class="col-12 md:col-12 text-center"><strong>Services:</strong><br>
                                <input type="text" pInputText placeholder="https://www.example.com"
                                    formControlName="Services" />
                            </p>

                            <p class="col-12 md:col-12 text-center"><strong>Description:</strong><br>
                                <textarea pInputTextarea formControlName="description" placeholder=""></textarea>
                            </p>
                        </div>
                        <div class="col-12 md:col-3">
                            <p style="cursor: pointer;"><a (click)="saveEditCommercialInfo()">Enregistrer les
                                    informations</a></p>
                        </div>
                    </form>
                </div>
            </p-fieldset><br>
            <p-fieldset legend="Information du partenariat">
                <div class="grid" style="color: black;font-weight:normal">
                    <div class="col-12 grid">
                        <p class="col-12 md:col-6 text-center"><strong>Ancienneté:</strong><br>
                            {{PartenaireInfo?.statut_anciennete}}</p>
                        <p class="col-12 md:col-4 text-center"><strong>Contribution:</strong><br>
                            {{PartenaireInfo?.contribution}}
                        </p>
                        <p class="col-12 md:col-6 text-center"><strong>Etat de contrat:</strong><br>
                            {{PartenaireInfo?.etat_contrat}}</p>
                        <div class="col-12 md:col-6 text-center">
                            <button pButton class="mr-2" label="Télécharger le contrat" type="button"
                                [disabled]="!PartenaireInfo?.pathEtatContrat"
                                (click)="downloadContrat()"></button>
                        </div>
                    </div>
                </div>
            </p-fieldset><br>
            <p-fieldset legend="Commissions" *ngIf="PartenaireInfo.commissions">
                <p-table [value]="PartenaireInfo.commissions">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Description</th>
                            <th>Montant</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-co>
                        <tr>
                            <td>{{co.description}}</td>
                            <td>{{co.montant}}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </p-fieldset>
        </div>
    </div>
</div>

<div *ngIf="isReinscrit">
    <div class="card">
        <div class="col-8 col-offset-2 flex justify-content-center flex-wrap card-container">
            <img src="assets\images\validation_dossier.jpg" style="max-width: 60%;">
        </div>
        <h2>Votre demande de reinscription est en cours de traitement.</h2>
        <h3 *ngIf="dataEtudiant && !dataEtudiant.valided_by_admin">Le statut de votre dossier est: En attente de la
            validation par
            l'administration. <a href="mailto:m.hue@intedgroup.com">Merci de contacté m.hue@intedgroup.com</a></h3>
        <h3 *ngIf="dataEtudiant && dataEtudiant.valided_by_admin">Le statut de votre dossier est: En attente de
            l'assignation au groupe
            scolaire par la pédagogie.</h3>
    </div>
</div>


<div *ngIf="isCEO">
    <h2 *ngIf="user" style="text-align: center;">
        Bonjour {{user.firstname | titlecase}} {{user.lastname | uppercase}}, bienvenue sur votre espace entreprise
    </h2>
    <div class="card">
        <div class="col-8 col-offset-2 flex justify-content-center flex-wrap card-container">
            <img src="assets\images\construction.jpg" style="width: 40%;">
        </div>
        <p>Le tableau de bord est actuellement en construction pour votre statut!</p>
        <p>Pour naviguer sur l'application, merci d'utiliser le menu à gauche.</p>
        <p>Si vous rencontrez le moindre problème, nous vous invitons à créer un ticket dans la partie <span
                style="color: red; font-weight: bold;">"Ticketing"</span> dans le menu</p>
        <p>Merci de votre patience!</p>
    </div>
</div>

<div *ngIf="isIntuns">
    <div class="card grid">
        <div class="col-3 flex flex-column align-items-center justify-content-center">
            <a href="https://www.lms.intuns.com/login/index.php">
                <img src="assets\images\livre_intuns.jpg" style="max-height: 200px;" />
            </a>
            <a href="https://www.lms.intuns.com/login/index.php">
                Supports de cours
            </a>
        </div>
        <p-divider class="col-1" layout="vertical">
        </p-divider>
        <div class="col-4 flex  flex-column align-items-center justify-content-center">
            <a href="{{dataIntuns?.formation_id?.linkedin}}">
                <img src="assets\images\linkedin-logo.png" style="max-height: 200px;" />
            </a>
            <a href="{{dataIntuns?.formation_id?.linkedin}}">
                Linked Learning
            </a>
        </div>
        <p-divider class="col-1" layout="vertical">
        </p-divider>
        <div class="col-3 flex  flex-column align-items-center justify-content-center">
            <a (click)="navigateToEmployabilite()">
                <img src="assets\images\emploi.jpg" style="max-height: 200px;" />
            </a>
            <a (click)="navigateToEmployabilite()">
                Employabilité et Alternance
            </a>
        </div>
    </div>
</div>





<div *ngIf="dashboard">
    <div class="card" *ngIf="showForm">
        <i class="pi pi-times-circle" style="float:right; font-size: 20px; color: red; cursor: pointer;"
            (click)="showForm=false;addLinkForm.reset()" aria-hidden="true"> </i>
        <h4 style="text-align: center;">Ajouter un lien</h4>
        <div style="text-align: center;">
            <small>Tous les champs marqués d'un astérisque <span style="color: red;"> * </span> sont
                obligatoires</small><br>
        </div>
        <br>
        <form class="p-fluid p-formgrid grid" [formGroup]="addLinkForm" (ngSubmit)="saveLink()">
            <div class="field col-12 md:col-6">
                <label for="libelle">Libellé <span style="color: red;"> * </span></label>
                <input pInputText id="libelle" type="text" formControlName="libelle" placeholder="Google" />
            </div>
            <div class="field col-12 md:col-6">
                <label for="link">Lien <span style="color: red;"> * </span></label>
                <input pInputText id="link" type="text" formControlName="link" placeholder="google.fr" />
            </div>
            <div style="justify-content: right;">
                <button pButton label="Ajouter" type="submit" [disabled]="addLinkForm.invalid"></button>
            </div>
        </form>
    </div>
    <div class="card">
        <button (click)="showForm=true;addLinkForm.reset()" pButton icon="pi pi-plus" label="Ajouter un nouveau lien"
            style="width:auto;float:right"></button>
        <h2>Tableau de bord personnel</h2>
        <div class="grid">
            <div class="field col-12 md:col-3 grid" *ngFor="let link of dashboard.links; let i = index">
                <a class="col-11" href="{{link.link}}" target="_blank">{{link.label}}</a>
                <i class="col-1 pi pi-trash" style="font-size: 20px; color: red; cursor: pointer; margin-left: 1%;"
                    (click)="deleteLink(i)" aria-hidden="true"> </i>
            </div>
        </div>
    </div>
</div>