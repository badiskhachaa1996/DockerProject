<p-toast></p-toast>
<!--<p>Local timezone: {{now|date:"long"}}</p>
    <p>Local timezone +2: {{now|date:'long':'+2'}}</p>
    <p>Timezone Diff : {{testForScience()}}</p>
    <div class="grid">
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-500 font-medium mb-3">Orders</span>
                        <div class="text-900 font-medium text-xl">152</div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-blue-100 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="pi pi-shopping-cart text-blue-500 text-xl"></i>
                    </div>
                </div>
                <span class="text-green-500 font-medium">24 new </span>
                <span class="text-500">since last visit</span>
            </div>
        </div>
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-500 font-medium mb-3">Revenue</span>
                        <div class="text-900 font-medium text-xl">$2.100</div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-orange-100 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="pi pi-map-marker text-orange-500 text-xl"></i>
                    </div>
                </div>
                <span class="text-green-500 font-medium">%52+ </span>
                <span class="text-500">since last week</span>
            </div>
        </div>
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-500 font-medium mb-3">Customers</span>
                        <div class="text-900 font-medium text-xl">28441</div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-cyan-100 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="pi pi-inbox text-cyan-500 text-xl"></i>
                    </div>
                </div>
                <span class="text-green-500 font-medium">520  </span>
                <span class="text-500">newly registered</span>
            </div>
        </div>
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-500 font-medium mb-3">Comments</span>
                        <div class="text-900 font-medium text-xl">152 Unread</div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-purple-100 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="pi pi-comment text-purple-500 text-xl"></i>
                    </div>
                </div>
                <span class="text-green-500 font-medium">85 </span>
                <span class="text-500">responded</span>
            </div>
        </div>

        <div class="col-12 xl:col-6">
            <div class="card">
                <h5>Recent Sales</h5>
                <p-table [value]="products" [paginator]="true" [rows]="10" responsiveLayout="scroll">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Image</th>
                            <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
                            <th pSortableColumn="price">Price <p-sortIcon field="price"></p-sortIcon></th>
                            <th>View</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-product>
                        <tr>
                            <td style="width: 15%; min-width: 5rem;">
                                <img src="assets/demo/images/product/{{product.image}}" class="shadow-4" alt="{{product.name}}" width="50">
                            </td>
                            <td style="width: 35%; min-width: 7rem;">{{product.name}}</td>
                            <td style="width: 35%; min-width: 8rem;">{{product.price | currency:'USD'}}</td>
                            <td style="width: 15%;">
                                <button pButton pRipple type="button" icon="pi pi-search" class="p-button p-component p-button-text p-button-icon-only"></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
            <div class="card">
                <div class="flex justify-content-between align-items-center mb-5">
                    <h5>Best Selling Products</h5>
                    <div>
                        <button pButton type="button" icon="pi pi-ellipsis-v" class="p-button-rounded p-button-text p-button-plain" (click)="menu.toggle($event)"></button>
                        <p-menu #menu [popup]="true" [model]="items"></p-menu>
                    </div>
                </div>
                <ul class="list-none p-0 m-0">
                    <li class="flex flex-column md:flex-row md:align-items-center md:justify-content-between mb-4">
                        <div>
                            <span class="text-900 font-medium mr-2 mb-1 md:mb-0">Space T-Shirt</span>
                            <div class="mt-1 text-600">Clothing</div>
                        </div>
                        <div class="mt-2 md:mt-0 flex align-items-center">
                            <div class="surface-300 border-round overflow-hidden w-10rem lg:w-6rem" [ngStyle]="{height: '8px'}">
                                <div class="bg-orange-500 h-full" [ngStyle]="{width: '50%'}"></div>
                            </div>
                            <span class="text-orange-500 ml-3 font-medium">%50</span>
                        </div>
                    </li>
                    <li class="flex flex-column md:flex-row md:align-items-center md:justify-content-between mb-4">
                        <div>
                            <span class="text-900 font-medium mr-2 mb-1 md:mb-0">Portal Sticker</span>
                            <div class="mt-1 text-600">Accessories</div>
                        </div>
                        <div class="mt-2 md:mt-0 ml-0 md:ml-8 flex align-items-center">
                            <div class="surface-300 border-round overflow-hidden w-10rem lg:w-6rem" [ngStyle]="{height: '8px'}">
                                <div class="bg-cyan-500 h-full" [ngStyle]="{width: '16%'}"></div>
                            </div>
                            <span class="text-cyan-500 ml-3 font-medium">%16</span>
                        </div>
                    </li>
                    <li class="flex flex-column md:flex-row md:align-items-center md:justify-content-between mb-4">
                        <div>
                            <span class="text-900 font-medium mr-2 mb-1 md:mb-0">Supernova Sticker</span>
                            <div class="mt-1 text-600">Accessories</div>
                        </div>
                        <div class="mt-2 md:mt-0 ml-0 md:ml-8 flex align-items-center">
                            <div class="surface-300 border-round overflow-hidden w-10rem lg:w-6rem" [ngStyle]="{height: '8px'}">
                                <div class="bg-pink-500 h-full" [ngStyle]="{width: '67%'}"></div>
                            </div>
                            <span class="text-pink-500 ml-3 font-medium">%67</span>
                        </div>
                    </li>
                    <li class="flex flex-column md:flex-row md:align-items-center md:justify-content-between mb-4">
                        <div>
                            <span class="text-900 font-medium mr-2 mb-1 md:mb-0">Wonders Notebook</span>
                            <div class="mt-1 text-600">Office</div>
                        </div>
                        <div class="mt-2 md:mt-0 ml-0 md:ml-8 flex align-items-center">
                            <div class="surface-300 border-round overflow-hidden w-10rem lg:w-6rem" [ngStyle]="{height: '8px'}">
                                <div class="bg-green-500 h-full" [ngStyle]="{width: '35%'}"></div>
                            </div>
                            <span class="text-green-500 ml-3 font-medium">%35</span>
                        </div>
                    </li>
                    <li class="flex flex-column md:flex-row md:align-items-center md:justify-content-between mb-4">
                        <div>
                            <span class="text-900 font-medium mr-2 mb-1 md:mb-0">Mat Black Case</span>
                            <div class="mt-1 text-600">Accessories</div>
                        </div>
                        <div class="mt-2 md:mt-0 ml-0 md:ml-8 flex align-items-center">
                            <div class="surface-300 border-round overflow-hidden w-10rem lg:w-6rem" [ngStyle]="{height: '8px'}">
                                <div class="bg-purple-500 h-full" [ngStyle]="{width: '75%'}"></div>
                            </div>
                            <span class="text-purple-500 ml-3 font-medium">%75</span>
                        </div>
                    </li>
                    <li class="flex flex-column md:flex-row md:align-items-center md:justify-content-between mb-4">
                        <div>
                            <span class="text-900 font-medium mr-2 mb-1 md:mb-0">Robots T-Shirt</span>
                            <div class="mt-1 text-600">Clothing</div>
                        </div>
                        <div class="mt-2 md:mt-0 ml-0 md:ml-8 flex align-items-center">
                            <div class="surface-300 border-round overflow-hidden w-10rem lg:w-6rem" [ngStyle]="{height: '8px'}">
                                <div class="bg-teal-500 h-full" [ngStyle]="{width: '40%'}"></div>
                            </div>
                            <span class="text-teal-500 ml-3 font-medium">%40</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="col-12 xl:col-6">
            <div class="card">
                <h5>Sales Overview</h5>
                <p-chart type="line" [data]="chartData" [options]="chartOptions"></p-chart>
            </div>

            <div class="card">
                <div class="flex align-items-center justify-content-between mb-4">
                    <h5>Notifications</h5>
                    <div>
                        <button pButton type="button" icon="pi pi-ellipsis-v" class="p-button-rounded p-button-text p-button-plain" (click)="menu.toggle($event)"></button>
                        <p-menu #menu [popup]="true" [model]="items"></p-menu>
                    </div>
                </div>

                <span class="block text-600 font-medium mb-3">TODAY</span>
                <ul class="p-0 mx-0 mt-0 mb-4 list-none">
                    <li class="flex align-items-center py-2 border-bottom-1 surface-border">
                        <div class="w-3rem h-3rem flex align-items-center justify-content-center bg-blue-100 border-circle mr-3 flex-shrink-0">
                            <i class="pi pi-dollar text-xl text-blue-500"></i>
                        </div>
                        <span class="text-900 line-height-3">Richard Jones
                    <span class="text-700"> has purchased a blue t-shirt for <span class="text-blue-500">79$</span></span>
                </span>
                    </li>
                    <li class="flex align-items-center py-2">
                        <div class="w-3rem h-3rem flex align-items-center justify-content-center bg-orange-100 border-circle mr-3 flex-shrink-0">
                            <i class="pi pi-download text-xl text-orange-500"></i>
                        </div>
                        <span class="text-700 line-height-3">Your request for withdrawal of <span class="text-blue-500 font-medium">2500$</span> has been initiated.</span>
                    </li>
                </ul>

                <span class="block text-600 font-medium mb-3">YESTERDAY</span>
                <ul class="p-0 m-0 list-none">
                    <li class="flex align-items-center py-2 border-bottom-1 surface-border">
                        <div class="w-3rem h-3rem flex align-items-center justify-content-center bg-blue-100 border-circle mr-3 flex-shrink-0">
                            <i class="pi pi-dollar text-xl text-blue-500"></i>
                        </div>
                        <span class="text-900 line-height-3">Keyser Wick
                    <span class="text-700"> has purchased a black jacket for <span class="text-blue-500">59$</span></span>
                </span>
                    </li>
                    <li class="flex align-items-center py-2 border-bottom-1 surface-border">
                        <div class="w-3rem h-3rem flex align-items-center justify-content-center bg-pink-100 border-circle mr-3 flex-shrink-0">
                            <i class="pi pi-question text-xl text-pink-500"></i>
                        </div>
                        <span class="text-900 line-height-3">Jane Davis
                    <span class="text-700"> has posted a new questions about your product.</span>
                </span>
                    </li>
                </ul>
            </div>

            <div class="px-4 py-5 shadow-2 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3"
            [ngStyle]="{borderRadius: '1rem', background: 'linear-gradient(0deg, rgba(0, 123, 255, 0.5), rgba(0, 123, 255, 0.5)), linear-gradient(92.54deg, #1C80CF 47.88%, #FFFFFF 100.01%)'}">
           <div>
               <div class="text-blue-100 font-medium text-xl mt-2 mb-3">TAKE THE NEXT STEP</div>
               <div class="text-white font-medium text-5xl">Try PrimeBlocks</div>
           </div>
           <div class="mt-4 mr-auto md:mt-0 md:mr-0">
               <a target="_blank" href="https://www.primefaces.org/primeblocks-ng" class="p-button font-bold px-5 py-3 p-button-warning p-button-rounded p-button-raised">
                   Get Started
               </a>
           </div>
       </div>
        </div>

    </div> -->

<div *ngIf="isUnknow">
    <h2 *ngIf="user" style="text-align: center;">Bienvenue {{user.firstname | titlecase}} {{user.lastname | uppercase}}
    </h2>
    <div class="card">
        <div class="col-8 col-offset-2 flex justify-content-center flex-wrap card-container">
            <img src="assets\images\construction.jpg" style="width: 40%;">
        </div>
        <p>Le tableau de bord est actuellement en construction pour votre statut!</p>
        <p>Pour naviguer sur l'application, merci d'utiliser le menu à gauche.</p>
        <p>Si vous rencontrez le moindre problème, nous vous invitons à créer un ticket dans la partie <span
                style="color: red; font-weight: bold;">"Ticketing"</span> dans le menu</p>
        <p>Merci de votre patience!</p>
    </div>
</div>

<div *ngIf="isAdmin">
    <h1 *ngIf="user" style="text-align: center;">Bienvenue {{user.firstname | titlecase}} {{user.lastname | uppercase}}</h1>
    <h5 style="text-align: center; margin-top: -10px;">{{ today | date: 'dd MMM y' }}</h5>

    <div class="col-12">
        <div class="card">
            <h6 *ngIf="dailyCheck">Vous êtes arrivé au travail à {{ dailyCheck.in_date | date: 'H:mm' }}</h6>
            <h5>
                Statut: <span [ngStyle]="{backgroundColor: onGetBackgroundColor()}"
                    style="border-radius: 30px; padding: 3px; color: white;">{{ statut }}</span>
                <span *ngIf="dailyCheck" style="color: red;">
                    |
                    Si vous ne validez pas votre CRA vos heures ne seront pas prises en compte
                </span>
            </h5>
            
            <button [disabled]="isCheck" pButton class="p-button-info mr-2 mb-2" label="Check in" icon="pi pi-sign-in"
                (click)="onCheckIn()"></button>

            <button [disabled]="!isCheck || dailyCheck?.craIsValidate" pButton class="p-button-success mr-2 mb-2" label="Valider mon CRA" icon="pi pi-sign-in"
                (click)="showButtonsValidateCra = !showButtonsValidateCra"></button>

            <button [disabled]="!dailyCheck?.isCheckable || !dailyCheck?.craIsValidate" pButton class="p-button-danger mr-2 mb-2"
                label="Check out" icon="pi pi-sign-out" (click)="onCheckOut();"></button>

            <!-- Bouton affiché au clique sur le bouton valider mon cra -->
            <div *ngIf="showButtonsValidateCra">
                <button style="margin: 2px;" pButton class="p-button-primary" icon="pi pi-list" label="tâches spécifique" (click)="onToggleFormDailyActivityDetail();"></button>
                <button style="margin: 2px;" pButton class="p-button-primary" icon="pi pi-file" label="tâches attribuées" (click)="onGetTaskInProgressForUser(); onToggleShowTaskForUser();"></button>
            </div>
            
            <!-- Formulaire pour remplir les tâches du jour -->
            <form *ngIf="showFormDailyActivityDetails" class="p-fluid mt-2" [formGroup]="formDailyActivityDetails"
                (ngSubmit)="onValidateCraByForm()">
                <h2>Tâches du jour</h2>
                <div class="p-formgrid grid">
                    <div class="field col-12">
                        <input pInputText type="text" placeholder="tâche 1: Description" formControlName="task" />
                    </div>
                </div>
                <hr>
                <div formArrayName="tasks">
                    <h3>Tâches supplémentaires</h3>
                    <div class="p-formgrid grid" *ngFor="let taskControl of getTasks().controls; let i = index">
                        <div class="field col-10">
                            <input pInputText type="text" placeholder="Tache {{ i + 2 }}" [formControlName]="i">
                        </div>
                        <div class="field col-2">
                            <button pButton icon="pi pi-trash" type="button" (click)="onRemoveTask(i)"
                                class="p-button-outlined p-button-danger"></button>
                        </div>
                    </div>
                    <button pButton icon="pi pi-plus" type="button" (click)="onAddTask()"
                        class="p-button-outlined p-button-info"></button>
                </div>

                <div class="field col-4 md:col-4">
                    <button pButton type="submit" [disabled]="formDailyActivityDetails.invalid"
                        label="Valider"></button>
                </div>
            </form>

            <!-- Table d'affichage de la liste des tâches en cours de l'utilisateur -->
            <div *ngIf="showTaskForUser" style="margin-top: 3px;">
                <h5>Vos tâches en cours</h5>
                <small>Merci de mettre à jour les pourcentages d'évolutions des tâches</small>
                <p-table #dt1 [value]="taskForUser" dataKey="_id" editMode="row"
                        [rows]="5" [rowHover]="true" [paginator]="true"
                        [globalFilterFields]="['libelle','percent','project_id?.libelle']"
                        responsiveLayout="scroll">

                    <ng-template pTemplate="caption">
                        <div class="flex justify-content-between flex-column sm:flex-row">
                            <span class="p-input-icon-left mb-2">
                                <i class="pi pi-search"></i>
                                <input pInputText type="text" #filter
                                    (input)="dt1.filterGlobal($event.target.value, 'contains')" placeholder="Recherche"
                                    class="w-full" />
                            </span>
                        </div>
                    </ng-template>

                    <ng-template pTemplate="header">
                        <tr>
                            <th>Libelle</th>
                            <th>Avancement</th>
                            <th>Projet</th>
                            <th>DeadLine</th>
                            <th></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-task let-editing="editing" let-ri="rowIndex">
                        <tr [pEditableRow]="task">
                            <td>
                                {{ task.libelle }}
                            </td>
                            <td>
                                <p-cellEditor>
                                    <ng-template pTemplate="input">
                                        <input pInputText type="text" [(ngModel)]="task.percent">
                                    </ng-template>
                                    <ng-template pTemplate="output">
                                        {{task.percent}}%
                                    </ng-template>
                                </p-cellEditor>
                            </td>
                            <td>
                                {{ task.project_id?.libelle }}
                            </td>
                            <td>
                                {{ task.date_limite | date: 'dd/MM/YYYY' }}
                            </td>
                            <td>
                                <div class="flex align-items-center justify-content-center gap-2">
                                    <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow
                                        icon="pi pi-pencil" (click)="onRowEditInit(task)"
                                        class="p-button-rounded p-button-text"></button>
                                    <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow
                                        icon="pi pi-check" (click)="onRowEditSave(task)"
                                        class="p-button-rounded p-button-text p-button-success mr-2"></button>
                                    <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow
                                        icon="pi pi-times" (click)="onRowEditCancel(task, ri)"
                                        class="p-button-rounded p-button-text p-button-danger"></button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>
</div>




<div *ngIf="isEtudiant && dataEtudiant">
    <h1 *ngIf="user && dataEtudiant">Bienvenue {{user.firstname | titlecase}} {{user.lastname | uppercase}}
        N°{{dataEtudiant?.custom_id}}
    </h1>
    <p *ngIf="dataEtudiant && dataEtudiant?.statut_dossier?.includes('Document Manquant') || dataEtudiant?.statut_dossier?.includes('Paiement non finalisé')" style="color:red;">Votre
        dossier n'est pas complet, il manque des documents ou votre statut n'est pas régularisé, veuillez contacter l'administration via Ticketing
    </p>

    
    <div class="col-12 card"> <!-- *ngIf="!dataEtudiant?.statut_dossier?.includes('Paiement non finalisé')" -->
        <div class="grid"
            *ngIf="dataEtudiant.lien_livret.read || dataEtudiant.lien_dossier_professionel ||dataEtudiant.lien_tableau_synthese">
            <h4 class="col-12">Documents</h4>
            <div class="card col-6" *ngIf="dataEtudiant.lien_livret.read">
                <h5>Livret</h5>
                <a href="{{dataEtudiant.lien_livret.read}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
            <div class="card col-3" *ngIf="dataEtudiant.lien_dossier_professionel">
                <h5 class="col-12">Dossier professionel</h5>
                <a href="{{dataEtudiant.lien_dossier_professionel}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
            <div class="card col-3" *ngIf="dataEtudiant.lien_tableau_synthese">
                <h5>Tableau synthèse</h5>
                <a href="{{dataEtudiant.lien_tableau_synthese}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
        </div>
        <div class="grid"
            *ngIf="dataEtudiant.lien_bulletin['Semestre 1'] || dataEtudiant.lien_bulletin['Semestre 2'] || dataEtudiant.lien_bulletin['Annuel']">
            <h4 class="col-12">Bulletin</h4>
            <div class="card col-3" *ngIf="dataEtudiant.lien_bulletin['Semestre 1']">
                <h5>Semestre 1</h5>
                <a href="{{dataEtudiant.lien_bulletin['Semestre 1']}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
            <div class="card col-3" *ngIf="dataEtudiant.lien_bulletin['Semestre 2']">
                <h5>Semestre 2</h5>
                <a href="{{dataEtudiant.lien_bulletin['Semestre 2']}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
            <div class="card col-6" *ngIf="dataEtudiant.lien_bulletin['Annuel']">
                <h5>Annuel</h5>
                <a href="{{dataEtudiant.lien_bulletin['Annuel']}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
        </div>
        <div class="grid" *ngIf="dataEtudiant.lien_attestation">
            <div class="card col-12" *ngIf="dataEtudiant.lien_attestation">
                <h5>Attestation</h5>
                <a href="{{dataEtudiant.lien_attestation}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
        </div>
        <div class="grid" *ngIf="dataEtudiant.classe_id && (dataEtudiant.classe_id.lien_programme || dataEtudiant.classe_id.lien_calendrier)">
            <h4 class="col-12">Documents de Formation</h4>
            <div class="card col-6" *ngIf="dataEtudiant.classe_id.lien_programme">
                <h5>Programme</h5>
                <a href="{{dataEtudiant.lien_programme}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
            <div class="card col-6" *ngIf="dataEtudiant.classe_id.lien_calendrier">
                <h5>Calendrier</h5>
                <a href="{{dataEtudiant.lien_calendrier}}" target="_blank"><img style="max-height: 20vh;"
                        src="assets/images/word.png" /></a>
            </div>
        </div>
    </div>

    <div class="col-12 md:col-6">
        <div class="card">
            <div class="col-12 flex justify-content-center flex-wrap card-container">
                <div>
                    <h4 class="col-12">Planning journée</h4>
                </div>

                <div class="col-12" *ngIf="type==null">
                    <p-fullCalendar #calendar [events]="events" class="col-12 md:col-8" [options]="optionsetu">
                    </p-fullCalendar>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 md:col-6">
        <div class="card" *ngIf="notes">
            <h5>Dernières notes obtenues</h5>
            <p-table [value]="dernotes">
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="note">Note <p-sortIcon field="note_val"></p-sortIcon>
                        </th>
                        <th pSortableColumn="price">Matière <p-sortIcon field="price"></p-sortIcon>
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-note>
                    <tr>
                        <td style="width: 35%; min-width: 7rem;">{{ note.note_val }}</td>
                        <td style="width: 35%; min-width: 7rem;">{{ matieres[note.matiere_id].nom }}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>

    <div class="col-12">
        <div class="card">
            <h5>
                Besoin d'un logement ?
                Rendez-vous sur <a routerLink="/logements">IMS Booking</a>. Nous vous mettons à disposition des
                logements tout neufs et pas cher.
            </h5>

            <p-galleria [(value)]="carousselImages" [responsiveOptions]="responsiveOptions"
                [containerStyle]="{'max-width': '800px', 'margin':'auto'}" [numVisible]="5">
                <ng-template pTemplate="item" let-item>
                    <img [src]="item.previewImageSrc" style="width: 100%;" />
                </ng-template>
                <ng-template pTemplate="thumbnail" let-item>
                    <div class="grid grid-nogutter justify-content-center">
                        <img [src]="item.thumbnailImageSrc" style="width:100px; height:100px" />
                    </div>
                </ng-template>
            </p-galleria>
        </div>
    </div>

</div>

<div *ngIf="isFormateur">
    <h2 style="text-align: center;">Bienvenue {{user?.lastname | uppercase}} {{user?.firstname |
        titlecase}} </h2>

    <!-- Affiche la partie checking -->
    <div class="col-12">
        <div class="card">
            <button *ngIf="!isCheck" pButton class="p-button-info mr-2 mb-2" label="Check in" icon="pi pi-sign-in"
                style="float: right" (click)="onCheckIn()"></button>
            <button *ngIf="isCheck" [disabled]="!dailyCheck.isCheckable" pButton class="p-button-danger mr-2 mb-2"
                label="Check out" icon="pi pi-sign-out" style="float: right"
                (click)="showFormDailyActivityDetails = true"></button>
            <h5>
                Statut: <span [ngStyle]="{backgroundColor: onGetBackgroundColor()}"
                    style="border-radius: 30px; padding: 3px; color: white;">{{ statut }}</span>
            </h5>
            <small *ngIf="dailyCheck">Vous êtes arrivé au travail le <span style="color: red">{{ dailyCheck.in_date |
                    date: 'd/M/yy à h:mm a' }}</span></small>

            <form *ngIf="showFormDailyActivityDetails" class="p-fluid" [formGroup]="formDailyActivityDetails"
                (ngSubmit)="onCheckOut()">
                <h2>Tâches du jour</h2>
                <div class="p-formgrid grid">
                    <div class="field col-12">
                        <input pInputText type="text" placeholder="tâche 1: Description" formControlName="task" />
                    </div>
                </div>
                <hr>
                <div formArrayName="tasks">
                    <h3>Tâches supplémentaires</h3>
                    <div class="p-formgrid grid" *ngFor="let taskControl of getTasks().controls; let i = index">
                        <div class="field col-10">
                            <input pInputText type="text" placeholder="Tache {{ i + 2 }}" [formControlName]="i">
                        </div>
                        <div class="field col-2">
                            <button pButton icon="pi pi-trash" type="button" (click)="onRemoveTask(i)"
                                class="p-button-outlined p-button-danger"></button>
                        </div>
                    </div>
                    <button pButton icon="pi pi-plus" type="button" (click)="onAddTask()"
                        class="p-button-outlined p-button-info"></button>
                </div>

                <div class="field col-4 md:col-2">
                    <button pButton type="submit" [disabled]="formDailyActivityDetails.invalid"
                        label="Valider & Check Out"></button>
                </div>

            </form>
        </div>
        <div class="col-12 card" *ngIf="dataFormateur">
            <div class="grid" *ngIf="dataFormateur.lien_sequentiel">
                <h4>Documents</h4>
                <div class="card col-12" *ngIf="dataFormateur.lien_sequentiel">
                    <h5>Sequentiels</h5>
                    <a href="{{dataFormateur.lien_sequentiel}}" target="_blank"><img style="max-height: 20vh;"
                            src="assets/images/word.png" /></a>
                </div>
            </div>
        </div>
    </div>

    <!-- Afficher les cours de la journée-->
    <div class="col-12 md:col-12">
        <div class="card">
            <div class="col-12 flex justify-content-center flex-wrap card-container">
                <div>
                    <h4 class="col-12">Planning pour la journée d'aujourd'hui</h4>
                </div>

                <div class="col-12" *ngIf="type==null">
                    <p-fullCalendar #calendar [events]="events" class="col-12 md:col-8" [options]="optionsforma">
                    </p-fullCalendar>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="isAdmission">
    <div class="grid">
        <div class="col-6 lg:col-6 xl:col-4">
            <div class="card mb-0">
                <div class="flex justify-content-between mb-4">
                    <div>
                        <span class="block text-500 font-medium mb-4">Nombre total d'inscrits</span>
                        <div class="text-900 font-medium text-xl">{{numberTotalInscription}}</div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-green-100 border-round"
                        [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="pi pi-check-circle text-green-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-6 lg:col-6 xl:col-4">
            <div class="card mb-0">
                <div class="flex justify-content-between mb-4">
                    <div>
                        <span class="block text-500 font-medium mb-4">Nombre de nouvelle inscrits </span>
                        <div class="text-900 font-medium text-xl">{{numberNewStudentInscription}}</div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-cyan-100 border-round"
                        [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="pi pi-id-card text-cyan-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 lg:col-6 xl:col-4">
            <div class="card mb-0">
                <div class="flex justify-content-between mb-4">
                    <div>
                        <span class="block text-500 font-medium mb-4">Nombre d'etudiant en attente</span>
                        <div class="text-900 font-medium text-xl">{{numberStudentWaiting}}</div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-orange-100 border-round"
                        [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="pi pi-clock text-orange-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12">
            <div class="card">
                <button *ngIf="!isCheck" pButton class="p-button-info mr-2 mb-2" label="Check in" icon="pi pi-sign-in"
                    style="float: right" (click)="onCheckIn()"></button>
                <button *ngIf="isCheck" [disabled]="!dailyCheck.isCheckable" pButton class="p-button-danger mr-2 mb-2"
                    label="Check out" icon="pi pi-sign-out" style="float: right"
                    (click)="showFormDailyActivityDetails = true"></button>
                <h5>
                    Statut: <span [ngStyle]="{backgroundColor: onGetBackgroundColor()}"
                        style="border-radius: 30px; padding: 3px; color: white;">{{ statut }}</span>
                </h5>
                <small *ngIf="dailyCheck">Vous êtes arrivé au travail le <span style="color: red">{{ dailyCheck.in_date
                        | date: 'd/M/yy à h:mm a' }}</span></small>

                <form *ngIf="showFormDailyActivityDetails" class="p-fluid" [formGroup]="formDailyActivityDetails"
                    (ngSubmit)="onCheckOut()">
                    <h2>Tâches du jour</h2>
                    <div class="p-formgrid grid">
                        <div class="field col-12">
                            <input pInputText type="text" placeholder="tâche 1: Description" formControlName="task" />
                        </div>
                    </div>
                    <hr>
                    <div formArrayName="tasks">
                        <h3>Tâches supplémentaires</h3>
                        <div class="p-formgrid grid" *ngFor="let taskControl of getTasks().controls; let i = index">
                            <div class="field col-10">
                                <input pInputText type="text" placeholder="Tache {{ i + 2 }}" [formControlName]="i">
                            </div>
                            <div class="field col-2">
                                <button pButton icon="pi pi-trash" type="button" (click)="onRemoveTask(i)"
                                    class="p-button-outlined p-button-danger"></button>
                            </div>
                        </div>
                        <button pButton icon="pi pi-plus" type="button" (click)="onAddTask()"
                            class="p-button-outlined p-button-info"></button>
                    </div>

                    <div class="field col-4 md:col-2">
                        <button pButton type="submit" [disabled]="formDailyActivityDetails.invalid"
                            label="Valider & Check Out"></button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>

<div *ngIf="isPedagogie">

    <div class="col-12">
        <div class="card">
            <button *ngIf="!isCheck" pButton class="p-button-info mr-2 mb-2" label="Check in" icon="pi pi-sign-in"
                style="float: right" (click)="onCheckIn()"></button>
            <button *ngIf="isCheck" [disabled]="!dailyCheck.isCheckable" pButton class="p-button-danger mr-2 mb-2"
                label="Check out" icon="pi pi-sign-out" style="float: right"
                (click)="showFormDailyActivityDetails = true"></button>
            <h5>
                Statut: <span [ngStyle]="{backgroundColor: onGetBackgroundColor()}"
                    style="border-radius: 30px; padding: 3px; color: white;">{{ statut }}</span>
            </h5>
            <small *ngIf="dailyCheck">Vous êtes arrivé au travail le <span style="color: red">{{ dailyCheck.in_date |
                    date: 'd/M/yy à h:mm a' }}</span></small>

            <form *ngIf="showFormDailyActivityDetails" class="p-fluid" [formGroup]="formDailyActivityDetails"
                (ngSubmit)="onCheckOut()">
                <h2>Tâches du jour</h2>
                <div class="p-formgrid grid">
                    <div class="field col-12">
                        <input pInputText type="text" placeholder="tâche 1: Description" formControlName="task" />
                    </div>
                </div>
                <hr>
                <div formArrayName="tasks">
                    <h3>Tâches supplémentaires</h3>
                    <div class="p-formgrid grid" *ngFor="let taskControl of getTasks().controls; let i = index">
                        <div class="field col-10">
                            <input pInputText type="text" placeholder="Tache {{ i + 2 }}" [formControlName]="i">
                        </div>
                        <div class="field col-2">
                            <button pButton icon="pi pi-trash" type="button" (click)="onRemoveTask(i)"
                                class="p-button-outlined p-button-danger"></button>
                        </div>
                    </div>
                    <button pButton icon="pi pi-plus" type="button" (click)="onAddTask()"
                        class="p-button-outlined p-button-info"></button>
                </div>

                <div class="field col-4 md:col-2">
                    <button pButton type="submit" [disabled]="formDailyActivityDetails.invalid"
                        label="Valider & Check Out"></button>
                </div>

            </form>
        </div>
    </div>

    <div class="card">
        <div class="col-8 col-offset-2 flex justify-content-center flex-wrap card-container">
            <img src="assets\images\construction.jpg" style="width: 40%;">
        </div>
        <p>Le tableau de bord de la pédagogie est actuellement en construction pour votre statut!</p>
        <p>Pour naviguer sur l'application, merci d'utiliser le menu à gauche.</p>
        <p>Si vous rencontrez le moindre problème, nous vous invitons à créer un ticket dans la partie <span
                style="color: red; font-weight: bold;">"Ticketing"</span> dans le menu</p>
        <p>Merci de votre patience!</p>
    </div>
    <!-- Afficher un calendrier de taches (TODO)-->
    <!-- Afficher le nombre total de réinscription en attente -->
    <!-- Afficher le nombre total d'étudiants dans les filières Informatique, Commercial et Tertiaire -->
    <!-- Afficher l'emploi du temps de la journée dans les filières Informatique, Commercial et Tertiaire -->
</div>

<div *ngIf="isCommercial">

    <div class="col-12">
        <div class="card">
            <button *ngIf="!isCheck" pButton class="p-button-info mr-2 mb-2" label="Check in" icon="pi pi-sign-in"
                style="float: right" (click)="onCheckIn()"></button>
            <button *ngIf="isCheck" [disabled]="!dailyCheck.isCheckable" pButton class="p-button-danger mr-2 mb-2"
                label="Check out" icon="pi pi-sign-out" style="float: right"
                (click)="showFormDailyActivityDetails = true"></button>
            <h5>
                Statut: <span [ngStyle]="{backgroundColor: onGetBackgroundColor()}"
                    style="border-radius: 30px; padding: 3px; color: white;">{{ statut }}</span>
            </h5>
            <small *ngIf="dailyCheck">Vous êtes arrivé au travail le <span style="color: red">{{ dailyCheck.in_date |
                    date: 'd/M/yy à h:mm a' }}</span></small>

            <form *ngIf="showFormDailyActivityDetails" class="p-fluid" [formGroup]="formDailyActivityDetails"
                (ngSubmit)="onCheckOut()">
                <h2>Tâches du jour</h2>
                <div class="p-formgrid grid">
                    <div class="field col-12">
                        <input pInputText type="text" placeholder="tâche 1: Description" formControlName="task" />
                    </div>
                </div>
                <hr>
                <div formArrayName="tasks">
                    <h3>Tâches supplémentaires</h3>
                    <div class="p-formgrid grid" *ngFor="let taskControl of getTasks().controls; let i = index">
                        <div class="field col-10">
                            <input pInputText type="text" placeholder="Tache {{ i + 2 }}" [formControlName]="i">
                        </div>
                        <div class="field col-2">
                            <button pButton icon="pi pi-trash" type="button" (click)="onRemoveTask(i)"
                                class="p-button-outlined p-button-danger"></button>
                        </div>
                    </div>
                    <button pButton icon="pi pi-plus" type="button" (click)="onAddTask()"
                        class="p-button-outlined p-button-info"></button>
                </div>

                <div class="field col-4 md:col-2">
                    <button pButton type="submit" [disabled]="formDailyActivityDetails.invalid"
                        label="Valider & Check Out"></button>
                </div>

            </form>
        </div>
    </div>

    <div class="card">
        <div class="col-8 col-offset-2 flex justify-content-center flex-wrap card-container">
            <img src="assets\images\construction.jpg" style="width: 40%;">
        </div>
        <p>Le tableau de bord des commerciaux est actuellement en construction pour votre statut!</p>
        <p>Pour naviguer sur l'application, merci d'utiliser le menu à gauche.</p>
        <p>Si vous rencontrez le moindre problème, nous vous invitons à créer un ticket dans la partie <span
                style="color: red; font-weight: bold;">"Ticketing"</span> dans le menu</p>
        <p>Merci de votre patience!</p>
    </div>
    <!-- Afficher le nombre total de ces prospects avec leur code -->
    <!-- Afficher le nombre total d'étudiants avec leur code -->
</div>

<div *ngIf="isReinscrit">
    <div class="card">
        <div class="col-8 col-offset-2 flex justify-content-center flex-wrap card-container">
            <img src="assets\images\validation_dossier.jpg" style="max-width: 60%;">
        </div>
        <h2>Votre demande de reinscription est en cours de traitement.</h2>
        <h3 *ngIf="dataEtudiant && !dataEtudiant.valided_by_admin">Le statut de votre dossier est: En attente de la
            validation par
            l'administration. <a href="mailto:m.hue@intedgroup.com">Merci de contacté m.hue@intedgroup.com</a></h3>
        <h3 *ngIf="dataEtudiant && dataEtudiant.valided_by_admin">Le statut de votre dossier est: En attente de
            l'assignation au groupe
            scolaire par la pédagogie.</h3>
    </div>
</div>


<div *ngIf="isCEO">
    <h2 *ngIf="user" style="text-align: center;">
        Bonjour {{user.firstname | titlecase}} {{user.lastname | uppercase}}, bienvenue sur votre espace entreprise
    </h2>
    <div class="card">
        <div class="col-8 col-offset-2 flex justify-content-center flex-wrap card-container">
            <img src="assets\images\construction.jpg" style="width: 40%;">
        </div>
        <p>Le tableau de bord est actuellement en construction pour votre statut!</p>
        <p>Pour naviguer sur l'application, merci d'utiliser le menu à gauche.</p>
        <p>Si vous rencontrez le moindre problème, nous vous invitons à créer un ticket dans la partie <span
                style="color: red; font-weight: bold;">"Ticketing"</span> dans le menu</p>
        <p>Merci de votre patience!</p>
    </div>
</div>




<div *ngIf="dashboard">
    <div class="card" *ngIf="showForm">
        <i class="pi pi-times-circle" style="float:right; font-size: 20px; color: red; cursor: pointer;"
            (click)="showForm=false;addLinkForm.reset()" aria-hidden="true"> </i>
        <h4 style="text-align: center;">Ajouter un lien</h4>
        <div style="text-align: center;">
            <small>Tous les champs marqués d'un astérisque <span style="color: red;"> * </span> sont
                obligatoires</small><br>
        </div>
        <br>
        <form class="p-fluid p-formgrid grid" [formGroup]="addLinkForm" (ngSubmit)="saveLink()">
            <div class="field col-12 md:col-6">
                <label for="libelle">Libellé <span style="color: red;"> * </span></label>
                <input pInputText id="libelle" type="text" formControlName="libelle" placeholder="Google" />
            </div>
            <div class="field col-12 md:col-6">
                <label for="link">Lien <span style="color: red;"> * </span></label>
                <input pInputText id="link" type="text" formControlName="link" placeholder="google.fr" />
            </div>
            <div style="justify-content: right;">
                <button pButton label="Ajouter" type="submit" [disabled]="addLinkForm.invalid"></button>
            </div>
        </form>
    </div>
    <div class="card">
        <button (click)="showForm=true;addLinkForm.reset()" pButton icon="pi pi-plus" label="Ajouter un nouveau lien"
            style="width:auto;float:right"></button>
        <h2>Tableau de bord personnel</h2>
        <div class="grid">
            <div class="field col-12 md:col-3 grid" *ngFor="let link of dashboard.links; let i = index">
                <a class="col-11" href="{{link.link}}" target="_blank">{{link.label}}</a>
                <i class="col-1 pi pi-trash" style="font-size: 20px; color: red; cursor: pointer; margin-left: 1%;"
                    (click)="deleteLink(i)" aria-hidden="true"> </i>
            </div>
        </div>
    </div>
</div>