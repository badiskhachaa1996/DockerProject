<div class="col-12 grid m-5">
    <form class="p-fluid p-formgrid grid card col-12" (ngSubmit)="checkID();" [formGroup]="documentForm">
        <div class="col-12">
            <label>Introduire le numéro de certificat ou l'adresse mail de l'étudiant <span style="color:red">
                    *</span></label>
            <input type="text" formControlName="input" pInputText>
        </div>
        <div class="col-12">
            <button type="submit" pButton [disabled]="documentForm.invalid" label="Valider"></button>
        </div>
    </form>
</div>
<div class="col-12 grid card m-5 mt-0" *ngIf="documents">
    <div class="col-12 grid">
        <div class="col-6 grid" *ngIf="USER && PROSPECT">
            <p class="col-12"><strong>Nom et prénom</strong> : {{USER.lastname|uppercase}} {{USER.firstname|titlecase}}</p>
            <p class="col-12"><strong>Formation choisie</strong> : {{PROSPECT.formation}}</p>
            <p class="col-12"><strong>Ecole</strong> : {{PROSPECT.type_form |uppercase}}</p>
        </div>
        <div class="col-6" style="text-align: right;">
            <img [src]="imageToShow" alt="Profil" style="border-radius: 50px;max-width: 160px;max-height: 160px;" />
        </div>
    </div>
    <div class="col-12 grid">
        <p-table #dt1 [value]="documents" dataKey="_id" responsiveLayout="scroll" [globalFilterFields]="['type']"
            [rows]="5" [pageLinks]="5" [paginator]="true" [totalRecords]="documents.length" class="col-12"
            styleClass="p-datatable-gridlines">
            <ng-template pTemplate="caption">
                <input pInputText type="text" #filter (input)="dt1.filterGlobal($event.target.value, 'contains')"
                    placeholder="Recherche" />
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="custom_id">
                        ID Document <p-sortIcon field="custom_id"> </p-sortIcon>
                    </th>
                    <th pSortableColumn="type">
                        Type de document <p-sortIcon field="type"> </p-sortIcon>
                    </th>
                    <th pSortableColumn="date">
                        Date de génération <p-sortIcon field="date"> </p-sortIcon>
                    </th>
                    <th>
                        Lien de téléchargement
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-doc>
                <tr>
                    <td>
                        {{ doc.custom_id }}
                    </td>
                    <td>
                        {{ doc.type }}
                    </td>
                    <td>
                        {{ doc.date | date:'mediumDate' }}
                    </td>
                    <td>
                        <a (click)="downloadFile(doc.filename,doc._id)">Télécharger le document</a>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>