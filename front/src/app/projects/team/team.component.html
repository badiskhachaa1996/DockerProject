<!-- Formulaire d'ajout d'une nouvelle équipe-->
<div class="grid" *ngIf="showFormAddTeam">
    <div class="col-12">
        <div class="card">
            <i class="pi pi-times-circle"
					style="float:right; margin-right: 30px; font-size: 20px; color: red; cursor: pointer;"
					pTooltip="Fermer" (click)="showFormAddTeam = false" aria-hidden="true"></i>
            <h4 style="text-align: center;">Ajouter une équipe</h4>
            <form class="p-fluid" [formGroup]="formAddTeam" (ngSubmit)="onAddTeam()">
                <div class="p-formgrid grid">
                    <div class="field col-6">
                        <label htmlFor="libelle">Libelle</label>
                        <input pInputText id="libelle" type="text" formControlName="libelle" placeholder="Par exemple, Inted Group Support" />
                    </div>
                    <div class="field col-6">
                        <label htmlFor="abbreviation">Abbréviation</label>
                        <input pInputText id="abbreviation" type="text" formControlName="abbreviation" placeholder="IGS" />
                    </div>
                    <div>
						<button pButton type="submit" label="Ajouter l'équipe" icon="pi pi-plus"></button>
					</div>
                </div>
            </form>         
        </div>
    </div>
</div>

<div class="grid">
    <div class="col-12">
        <div class="card">
            <button pButton label="Nouvelle équipe" icon="pi pi-plus" style="float: right;" (click)="showFormAddTeam = true"></button>
            <h4>Équipes</h4>
            <p-table #dt1 [value]="teams" dataKey="_id" editMode="row"
            [rows]="10" [rowHover]="true" [paginator]="true"
            [globalFilterFields]="['libelle','abbreviation']"
            responsiveLayout="scroll">

       <ng-template pTemplate="caption">
           <div class="flex justify-content-between flex-column sm:flex-row">
               <span class="p-input-icon-left mb-2">
                   <i class="pi pi-search"></i>
                   <input pInputText type="text" #filter
                       (input)="dt1.filterGlobal($event.target.value, 'contains')" placeholder="Recherche"
                       class="w-full" />
               </span>
           </div>
       </ng-template>

       <ng-template pTemplate="header">
           <tr>
               <th>Libelle</th>
               <th>Abbréviation</th>
               <th>Action</th>
           </tr>
       </ng-template>
       <ng-template pTemplate="body" let-team let-editing="editing" let-ri="rowIndex">
           <tr [pEditableRow]="team">
               <td>
                   <p-cellEditor>
                       <ng-template pTemplate="input">
                           <input pInputText type="text" [(ngModel)]="team.libelle">
                       </ng-template>
                       <ng-template pTemplate="output">
                        {{team.libelle}}
                       </ng-template>
                   </p-cellEditor>
               </td>
               <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="team.abbreviation">
                    </ng-template>
                    <ng-template pTemplate="output">
                     {{team.abbreviation}}
                    </ng-template>
                </p-cellEditor>
               </td>
               <td>
                   <div class="flex align-items-center justify-content-center gap-2">
                       <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow
                           icon="pi pi-pencil" (click)="onRowEditInit(team)"
                           class="p-button-rounded p-button-text"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow
                           icon="pi pi-check" (click)="onRowEditSave(team)"
                           class="p-button-rounded p-button-text p-button-success mr-2"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow
                           icon="pi pi-times" (click)="onRowEditCancel(team)"
                           class="p-button-rounded p-button-text p-button-danger"></button>       
                   </div>
               </td>
           </tr>
       </ng-template>
   </p-table>
        </div>
    </div>
</div>