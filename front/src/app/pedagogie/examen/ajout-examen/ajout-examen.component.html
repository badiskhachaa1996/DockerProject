<p-toast></p-toast>
<div class="grid" *ngIf="formAddExamen">

    <div class="col-12" >
        <div class="card">

            <h3 style="text-align: center;">Ajouter une évaluation</h3>
            <p-toast></p-toast>
            <form class="p-fluid p-formgrid grid" [formGroup]="formAddExamen"
                (ngSubmit)="onAddExamen();">
                <div class="field col-12 ">
                    <small>Tout les champs marqués d'un asterique <span style="color:red">*</span> sont obligatoires</small>
                </div>

                <div class="field col-12 md:col-6">
                    <label For="classe">Groupe<span style="color:red">*</span>:</label><br>

                    <p-multiSelect [options]="dropdownClasse" filter="true" (onChange)='updateLibelle();filterModule()'  formControlName="classe_id" placeholder="Choissisez un groupe">
                    </p-multiSelect>

                </div>

                <div class="field col-12 md:col-6">
                    <label>Module<span style="color:red">*</span>:</label><br>
                    <span>
                        <p-dropdown [options]="dropdownMatiere" filter="true" (onChange)='updateLibelle();filterFormateur()'  formControlName="matiere_id" placeholder="Choissisez un module">
                        </p-dropdown>
                    </span>
                </div>

                <div class="field col-12 md:col-6" >
                   
                    <label>Formateur<span style="color:red">*</span>:</label><br>
                    <span>
                        <p-dropdown [options]="dropdownFormateur" filter="true"  placeholder="Choisir un formateur" (onChange)='updateLibelle()' formControlName="formateur_id">
                        </p-dropdown>
                    </span>
                </div>

                <div class="field col-12 md:col-6">
                    <label>Date<span style="color:red">*</span>:</label><br>
                    <input type="datetime-local" formControlName="date" class="form-control col-12" pInputText>
                </div>

                <div class="field col-12 md:col-6" >
                   
                    <label>Semestre<span style="color:red">*</span>:</label><br>
                    <span>
                        <p-dropdown [options]="dropdownSemestre"  placeholder="Choisir un semestre" formControlName="semestre">
                        </p-dropdown>
                    </span>
                </div>

                <div class="field col-12 md:col-6">
                    <label>Note max<span style="color:red">*</span>:</label><br>
                    <input type="text" formControlName="note_max" class="form-control col-12"
                        placeholder="20" pInputText>

                    <div *ngIf="note_max.invalid && (note_max.touched || note_max.dirty)">
                        <span *ngIf="note_max.errors?.pattern" style="color: red;">
                            La note maximale n'est pas dans le bon format
                        </span>
                    </div>
                </div>

                <div class="field col-12 md:col-6">
                    <label>Niveau de l'évaluation<span style="color:red">*</span>:</label><br>
                    <span>
                        <p-dropdown [options]="dropdownNiveau" formControlName="niveau" placeholder="Choissisez le niveau de l'évaluation" (onChange)='updateLibelle()'>
                        </p-dropdown>
                    </span>
                </div>

                <div class="field col-12 md:col-6">
                    <label>Type d'évaluation<span style="color:red">*</span>:</label><br>
                    <span>
                        <p-dropdown [options]="dropdownType" formControlName="type" placeholder="Choissisez le type de l'évaluation">
                        </p-dropdown>
                    </span>
                </div>
                <div class="field col-12">
                    <label>Libellé:</label><br>
                    <input type="text" formControlName="libelle" class="form-control col-12"
                        placeholder="Intitulé de l'évaluation" pInputText>

                </div>
                <div>
                    <button pButton type="submit" label="Ajouter l'évaluation" [disabled]="formAddExamen.invalid"></button>

                </div>

            </form>

            <a routerLink="/examens" style="float: right;"><i class="pi pi-caret-right"></i> Voir les évaluations</a>


        </div>
    </div>
</div>