<div class="grid card col-12">
    <p-fieldset legend="Paiement et documents administratives" *ngIf="PROSPECT" style="width: 100%;">
        <!--<div class="col-12 grid">
            <div class="col-6">
                <strong>Effectuer un paiement:</strong>
            </div>
    
            <p class="col-6"><a
                    href="https://elitechgroupe-my.sharepoint.com/:w:/g/personal/h_elkadhi_intedgroup_com/EYxI2p3lWoBMmXcePJ3cYIMB9Y0-S8ej4gvAlEpUvo8jZQ?e=EL4GsT">Lien
                    en cours de dévéloppement</a></p>
        </div>-->
        <div class="col-12 grid">
            <p-table #dt2 dataKey="ID" [value]="PROSPECT.payement" class="col-12" styleClass="p-datatable-gridlines">
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="ID" style="text-align: center;"> ID <p-sortIcon field="ID">
                            </p-sortIcon>
                        </th>
                        <th pSortableColumn="montant" style="text-align: center;"> Montant <p-sortIcon
                                field="montant"></p-sortIcon>
                        </th>
                        <th pSortableColumn="type" style="text-align: center;"> Modalité <p-sortIcon field="type">
                            </p-sortIcon>
                        </th>
                        <th pSortableColumn="motif" style="text-align: center;"> Motif <p-sortIcon field="motif">
                            </p-sortIcon>
                        </th>
                        <th pSortableColumn="date" style="text-align: center;"> Date d'encaissement <p-sortIcon
                                field="date"></p-sortIcon>
                        </th>

                        <th pSortableColumn="doc" style="text-align: center;">
                            Lien
                        </th>
                        <th>
                            <div class="flex justify-content-between align-items-center">
                                Action
                            </div>
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-paiement let-ri="rowIndex">
                    <tr>
                        <td>
                            {{paiement?.ID}}
                        </td>
                        <td>
                            {{paiement.montant}}€
                        </td>
                        <td>
                            {{paiement.type}}
                        </td>
                        <td>
                            {{paiement.motif}}
                        </td>
                        <td>
                            {{paiement.date | date:'dd MMMM yy'}}
                        </td>
                        <td>
                            <a *ngIf="paiement.doc" (click)="downloadFilePayment(paiement,ri)">Télécharger le
                                fichier</a>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
    
            <p class="col-12" style="text-align: center;"><strong>Reste à payer :</strong> {{resteAPayer}}€</p>
        </div>
        <div class="col-12 grid">
            <div class="col-12">
                <strong>Mes attestations disponibles:</strong>
            </div>
            <div class="col-12">
                <p-table styleClass="p-datatable-gridlines" [value]="PROSPECT.documents_administrative"
                    responsiveLayout="scroll" responsiveLayout="scroll">
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th>
                                ID
                            </th>
                            <th>
                                Type
                            </th>
                            <th>
                                Date de délivrance
                            </th>
                            <th>
                                Nom du document
                            </th>
                            <th>
                                Traité par
                            </th>
                            <th>
                                Lien de téléchargement
                            </th>
                            <th>
                                Note
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData>
                        <tr>
                            <td>
                                {{rowData.custom_id}}
                            </td>
                            <td>
                                {{rowData.type}}
                            </td>
                            <td>
                                {{rowData.date | date:'dd MMMM yy'}}
                            </td>
                            <td>
                                {{rowData.nom}}
                            </td>
                            <td>
                                {{rowData.traited_by}}
                            </td>
                            <td>
                                <a (click)="downloadAdminFile(rowData.path)">Télécharger</a>
                            </td>
                            <td>
                                {{rowData.note}}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </p-fieldset>
</div>
